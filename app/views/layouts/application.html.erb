<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>TODO</title>
    <%= csrf_meta_tags %>
    <%= action_cable_meta_tag %>
    <%= stylesheet_link_tag 'application', media: 'all' %>
    <%#= stylesheet_pack_tag 'application', media: 'all' %> <!-- Uncomment if you import CSS in app/javascript/packs/application.js -->
  </head>
  <body>
    <div class="wrapper">
      <!-- NAVBAR -->
      <div class="navbar">
        <a href="/"><h4 class="logo">mysportbuddies</h4></a>
        <!-- SEARCH BAR -->
        <% unless @no_search_bar %>
          <div class="search-bar">
            <%= simple_form_for :search, defaults: { required: false }, url: pages_path, method: "GET", html: { class: 'form-inline' } do |f| %>
              <%= f.input :title, label: false, placeholder: "Search for anything", input_html: {value: ""} %>
            <% end %>
          </div>
        <% end %>

        <!-- IF USER IS LOGGED IN -->
        <% if current_user %>
          <div class="options">
            <!-- FIXME: FIND BUDDIES LINK -->
            <%= link_to  "Find buddies", matches_path %>
            <%= link_to  "Browse matches", matches_path %>
            <%= link_to  "Host a match", new_match_path, class: "host-service" %>
          </div>
          <!-- PROFILE DROPDOWN -->
          <div class="nav-item dropdown">
            <%= cl_image_tag current_user.photo, crop: :fill, class:"avatar dropdown-toggle", id:"navbarDropdown", style: "object-fit: cover", data: { toggle: 'dropdown'} %>
            <!-- FIXME: the carret down is not press-able -->
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
              <%= link_to "Your Profile", profile_path(current_user), class:"dropdown-item" %>
              <%= link_to  "Your Matches", matches_path(user_id: current_user.id), class:"dropdown-item" %>
              <%= link_to  "Your Challenges", matches_path, class:"dropdown-item" %>
              <%= link_to "Logout", destroy_user_session_path, method: :delete, class:"dropdown-item" %>
            </div>
            <p><i class="fas fa-caret-down"></i></p>
          </div>
        <% else %>
          <div class="options">
            <%= link_to  "Browse matches", matches_path %>
            <%= link_to  "Login", new_user_session_path %>
            <%= link_to  "Host a match", new_match_path, class: "host-service" %>
          </div>
        <% end %>
      </div>

      <%= yield %>
    </div>

    <!-- FOOTER -->
    <footer>
      <div class="row">
        <%= link_to  "mysportbuddies", root_path, class: "logo" %>
        <div class="col-sm-12 col-md-6">
          <div>
            <a href=""><i class="fab fa-github"></i> Github</a>
          </div>
          <div>
              <a href=""><i class="fab fa-instagram"></i> Instagram</a>
          </div>
          <div>
              <a href=""><i class="fab fa-facebook"></i> Facebook</a>
          </div>
          <div>
              <a href=""><i class="fab fa-linkedin"></i> LinkedIn</a>
          </div>
        </div>

        <div class="col-sm-12 col-md-6">
          <div>
            <a href="">Browse all matches</a>
          </div>
          <div>
            <a href="">Browse all users</a>
          </div>
          <div>
            <a href="">Leave Us Feedbacks</a>
          </div>
          <div>
            <a href="">Contact Us</a>
          </div>
        </div>
      </div>
    </footer>

    <%= javascript_include_tag 'application' %>
    <%= javascript_pack_tag 'application' %>
  </body>
</html>
